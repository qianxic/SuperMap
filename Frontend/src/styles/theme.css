:root {
  /* Clean and professional light theme */
  --bg: #f8f9fa;
  --panel: #ffffff;
  --border: #dee2e6;
  --glow: 0 2px 8px rgba(0, 0, 0, 0.08);
  --text: #212529;
  --sub:  #6c757d;
  --accent: #007bff;
  --accent-rgb: 0, 123, 255;

  --btn-primary-bg: #007bff;
  --btn-primary-color: #ffffff;
  --btn-secondary-bg: #e9ecef;
  --btn-secondary-color: #212529;

  /* Light theme specific variables */
  --surface: rgba(0, 0, 0, 0.03);
  --surface-hover: rgba(0, 0, 0, 0.06);
  --divider: #dee2e6;
  --splitter-bg: rgba(0, 0, 0, 0.1);
  --splitter-hover: #007bff;

  --radius: 10px;
  
  /* Map highlight colors for light theme */
  --map-hover-fill: rgba(0, 0, 0, 0.06);
  --map-select-fill: rgba(0, 123, 255, 0.15);
  --map-select-point-fill: rgba(0, 123, 255, 0.25);

  /* Feature popup styles */
  --popup-bg: #ffffff;
  --popup-border: #dee2e6;
  --popup-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  --field-label-color: #6c757d;
  --field-value-color: #212529;
  
  /* Selection colors for light theme */
  --selection-bg: rgba(0, 123, 255, 0.1);
  
  /* Field type colors for light theme */
  --field-type-text-bg: rgba(52, 152, 219, 0.1);
  --field-type-text-color: #3498db;
  --field-type-number-bg: rgba(46, 204, 113, 0.1);
  --field-type-number-color: #2ecc71;
  --field-type-boolean-bg: rgba(155, 89, 182, 0.1);
  --field-type-boolean-color: #9b59b6;
  --field-type-date-bg: rgba(241, 196, 15, 0.1);
  --field-type-date-color: #f1c40f;
  --field-type-array-bg: rgba(230, 126, 34, 0.1);
  --field-type-array-color: #e67e22;
  --field-type-object-bg: rgba(231, 76, 60, 0.1);
  --field-type-object-color: #e74c3c;
  --field-type-null-bg: rgba(149, 165, 166, 0.1);
  --field-type-null-color: #95a5a6;
  --field-type-unknown-bg: rgba(52, 73, 94, 0.1);
  --field-type-unknown-color: #34495e;
}



/* Windows-style dark theme */
[data-theme="dark"] {
  --bg: #1e1e1e;
  --panel: #2d2d30;
  --border: #3c3c3c;
  --glow: 0 2px 8px rgba(0, 0, 0, 0.4);
  --text: #ffffff;
  --sub: #cccccc;
  --accent: #0078d4;
  --accent-rgb: 0, 120, 212;

  --btn-primary-bg: #0078d4;
  --btn-primary-color: #ffffff;
  --btn-secondary-bg: #373737;
  --btn-secondary-color: #ffffff;

  /* Dark theme specific variables */
  --surface: rgba(255, 255, 255, 0.03);
  --surface-hover: rgba(255, 255, 255, 0.06);
  --divider: #484848;
  --splitter-bg: rgba(255, 255, 255, 0.1);
  --splitter-hover: #0078d4;
  --overlay: rgba(0, 0, 0, 0.6);
  
  /* Scrollbar colors for dark theme */
  --scrollbar-track: rgba(255, 255, 255, 0.1);
  --scrollbar-thumb: rgba(255, 255, 255, 0.3);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.5);
  
  /* Selection colors for dark theme */
  --selection-bg: rgba(0, 120, 212, 0.4);
  
  /* Field type colors for dark theme */
  --field-type-text-bg: rgba(52, 152, 219, 0.2);
  --field-type-text-color: #74b9ff;
  --field-type-number-bg: rgba(46, 204, 113, 0.2);
  --field-type-number-color: #55a3ff;
  --field-type-boolean-bg: rgba(155, 89, 182, 0.2);
  --field-type-boolean-color: #a29bfe;
  --field-type-date-bg: rgba(241, 196, 15, 0.2);
  --field-type-date-color: #fdcb6e;
  --field-type-array-bg: rgba(230, 126, 34, 0.2);
  --field-type-array-color: #fd79a8;
  --field-type-object-bg: rgba(231, 76, 60, 0.2);
  --field-type-object-color: #e17055;
  --field-type-null-bg: rgba(149, 165, 166, 0.2);
  --field-type-null-color: #b2bec3;
  --field-type-unknown-bg: rgba(52, 73, 94, 0.2);
  --field-type-unknown-color: #636e72;
  
  /* Map highlight colors for dark theme */
  --map-hover-fill: rgba(255, 255, 255, 0.06);
  --map-select-fill: rgba(0, 120, 212, 0.2);
  --map-select-point-fill: rgba(0, 120, 212, 0.35);

  /* Feature popup styles for dark theme */
  --popup-bg: #2d2d30;
  --popup-border: #3c3c3c;
  --popup-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
  --field-label-color: #cccccc;
  --field-value-color: #ffffff;
}

/* Fixed layer colors (do not follow theme) */
:root, [data-theme="dark"] {
  /* 行政区划 - 武汉_县级 */
  --layer-stroke-武汉_县级: var(--accent);
  --layer-fill-武汉_县级: rgba(0, 0, 0, 0);

  /* 交通设施 - 公路 */
  --layer-stroke-公路: #f39c12;
  --layer-fill-公路: rgba(243, 156, 18, 0.08);

  /* 交通设施 - 铁路 */
  --layer-stroke-铁路: #8e44ad;
  --layer-fill-铁路: rgba(142, 68, 173, 0.08);

  /* 水系 - 水系面 */
  --layer-stroke-水系面: #2980b9;
  --layer-fill-水系面: rgba(41, 128, 185, 0.18);

  /* 水系 - 水系线 */
  --layer-stroke-水系线: #3498db;
  --layer-fill-水系线: rgba(52, 152, 219, 0.10);

  /* 建筑物 - 建筑物面 */
  --layer-stroke-建筑物面: #7f8c8d;
  --layer-fill-建筑物面: rgba(127, 140, 141, 0.20);

  /* 地名点 - 居民地地名点 */
  --layer-stroke-居民地地名点: #e74c3c;
  --layer-fill-居民地地名点: rgba(231, 76, 60, 0.35);

  /* 公共服务 - 学校 */
  --layer-stroke-学校: #27ae60;
  --layer-fill-学校: rgba(39, 174, 96, 0.35);

  /* 公共服务 - 医院 */
  --layer-stroke-医院: #c0392b;
  --layer-fill-医院: rgba(192, 57, 43, 0.35);
}

/* Utility panel style (optional reuse) */
.card-panel {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--glow);
}

.btn-primary {
  background: var(--btn-primary-bg);
  color: var(--btn-primary-color);
}

.btn-secondary {
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-color);
  border: 1px solid var(--border);
}

/* OpenLayers controls theme */
.ol-zoom {
  background: var(--panel) !important;
  border: 1px solid var(--border) !important;
  border-radius: 10px !important;
  box-shadow: var(--glow) !important;
  padding: 4px !important;
}

.ol-control button {
  background: var(--btn-primary-bg) !important;
  color: var(--btn-primary-color) !important;
  border: 1px solid var(--border) !important;
  border-radius: 6px !important;
  width: 28px !important;
  height: 28px !important;
}

.ol-control button:hover {
  background: var(--surface-hover, var(--btn-primary-bg)) !important;
  transform: translateY(-1px);
}

/* FeaturePopup common text colors */
.popup .hd { color: var(--sub) !important; }
.popup { 
  background: var(--panel) !important; 
  border: 1px solid var(--border) !important; 
  box-shadow: var(--glow) !important; 
  color: var(--text) !important; 
}




/* Feature popup styles */
.feature-info {
  max-width: 300px;
}

.multi-feature-info {
  max-width: 400px;
}

.feature-count {
  font-weight: 600;
  color: var(--accent);
  margin-bottom: 8px;
  font-size: 14px;
}

.feature-item {
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 8px;
  margin-bottom: 8px;
  background: var(--surface);
}

.feature-header {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 6px;
  font-size: 13px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 4px;
}

.field-row {
  display: flex;
  margin-bottom: 4px;
  font-size: 12px;
}

.field-label {
  color: var(--field-label-color);
  font-weight: 500;
  min-width: 80px;
  flex-shrink: 0;
}

.field-value {
  color: var(--field-value-color);
  word-break: break-word;
  margin-left: 8px;
}

/* Layer group styles */
.layer-group {
  margin-bottom: 16px;
}

.group-title {
  font-size: 12px;
  color: var(--sub);
  margin-bottom: 8px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.group-items {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* 全局防闪烁样式 - 防止主题切换时的颜色闪烁 */
.no-theme-flicker,
.no-theme-flicker *,
.no-theme-flicker *::before,
.no-theme-flicker *::after {
  transition: none !important;
  animation: none !important;
}

/* 特定组件的防闪烁样式 */
.overview-map-container,
.layer-item,
.analysis-section,
.feature-query-panel,
.layer-manager-panel {
  transition: none !important;
}

.overview-map-container *,
.layer-item *,
.analysis-section *,
.feature-query-panel *,
.layer-manager-panel * {
  transition: none !important;
  animation: none !important;
}

/* 确保OpenLayers地图在主题切换时不闪烁 */
.ol-viewport,
.ol-canvas,
.ol-control {
  transition: none !important;
}

/* 按钮和交互元素的防闪烁 */
button,
.btn,
.overview-toggle-btn {
  transition: none !important;
}

/* 面板和容器的防闪烁 */
.panel-window,
.panel-container {
  transition: none !important;
}

.panel-window *,
.panel-container * {
  transition: none !important;
  animation: none !important;
}
